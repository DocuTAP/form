/*!
 * @docutap/form v0.0.0
 * (c) 2017 adriancarriger
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["@docutap/form"]=e["@docutap/form"]||{})}(this,function(e){"use strict";var t={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("md-button",{staticClass:"md-raised md-accent",class:e.schema.classes,attrs:{type:"submit"}},[e._v(e._s(e.schema.text||"Submit"))])},staticRenderFns:[],name:"docutap-submit",props:{schema:{type:Object}}},o={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("form",{staticClass:"docutap-form",attrs:{novalidate:""},on:{submit:function(t){t.preventDefault(),e.validateBeforeSubmit(t)}}},e._l(e.schemaItems,function(t){return o(t.component,{key:t.name,tag:"component",attrs:{schema:t,model:e.model,showErrors:e.showErrors}})}))},staticRenderFns:[],name:"docutap-form",$validates:!0,props:{model:{type:Object},schema:{type:Object}},data:function(){return{schemaItems:[],showErrors:!1}},mounted:function(){var e=this;this.schemaItems=this.schema.fields.map(function(t){if(void 0===t.name&&(t.name=e.camelize(t.label)),void 0===t.component&&(["select","radio","checkboxes"].includes(t.type)?t.component="docutap-"+t.type:"submit"===t.type?(t.component="docutap-submit",t.input=!1,t.validator=!1):"info"===t.type?(t.component="docutap-info",t.input=!1,t.validator=!1):t.component="docutap-input"),void 0===t.validator&&(t.validator=""),"docutap-input"===t.component&&void 0===t.type&&(t.type="text"),!1!==t.input&&void 0===e.model[t.name])if("checkboxes"===t.type){e.model[t.name]={};var o=t.values.reduce(function(e,t){return e[t]=!1,e},{});e.$set(e.model,t.name,o)}else e.$set(e.model,t.name,"");return t}),!1!==this.schema.autofocus&&setTimeout(function(){return e.$el.querySelector("input").focus()})},methods:{validateBeforeSubmit:function(){var e=this;this.$validator.validateAll().then(function(t){t?e.$emit("submit"):(e.showErrors=!0,e.$el.querySelector('*[data-vv-id="'+e.$validator.errors.items[0].id+'"]').focus())})},camelize:function(e){if(void 0!==e)return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return!1===Boolean(t)?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"docutap-info",class:[e.themeClass],attrs:{disabled:e.disabled}},[e.schema.image?o("img",{attrs:{src:e.schema.image}}):e._e(),e.schema.text||e.schema.label?o("p",{staticClass:"intro-content"},[e._v(e._s(e.schema.text||e.schema.label))]):e._e()])},staticRenderFns:[],_scopeId:"data-v-c71a386c",props:{schema:{type:Object}}},a={DocutapSubmit:function(e){e.component("docutap-submit",t)},DocutapForm:function(e){e.component("docutap-form",o)},DocutapInfo:function(e){e.component("docutap-info",n)}};a.install=function(e){for(var t in a){var o=a[t];o&&"install"!==t&&e.use(o)}},"undefined"!=typeof window&&window.Vue&&window.Vue.use(a.install),a.version="0.0.0",e.default=a,Object.defineProperty(e,"__esModule",{value:!0})});